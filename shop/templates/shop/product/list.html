{% extends "shop/base.html" %}
{% load static %}
{% block title %}
    {% if category %}{{ category.name }}{% else %}Наклейки{% endif %}
{% endblock %}
{% block content %}
    <div class="md:hidden">
        {% with total_items=cart|length %}
            {% if cart|length > 0 %}
                <a href="{% url "cart:cart_detail" %}"
                   class="z-50 fixed bottom-6 right-6 rounded-full shadow-md px-6 py-1 bg-red-400 border text-lg md:text-sm text-white font-light">
                    {{ cart.get_total_price }} ₽
                </a>
            {% endif %}
        {% endwith %}
    </div>
    <div class="mt-6">
        <div class="" id="categories">
            <ul class="flex justify-center">
                <li class="mx-6">
                    <a class="text-lg" {% if not category %} class="text-red-400 bg-yellow-50"{% endif %}
                       href="{% url "shop:product_list" %}">
                        <img class="w-8 md:w-10" src="/media/all_cat.png" alt="">
                    </a>
                </li>
                {% for c in categories %}
                    <li class="mx-4">
                        <a {% if category.slug == c.slug %}class="text-red-400"{% endif %}
                           href="{{ c.get_absolute_url }}">
                            {% if c.icon %}
                                <img class="w-8 md:w-10" src="{{ c.icon.url }}" alt="Категория">
                            {% else %}
                                {{ c.name }}
                            {% endif %}
                        </a>
                    </li>
                {% endfor %}
            </ul>
            <h2 class="text-3xl text-center mt-4">
                {% if category %}{{ category.name }}{% else %}Все наклейки{% endif %}
            </h2>
        </div>
        <!-- Товары -->

        <section class="container p-3 mx-auto">
            <div class="grid gap-4 md:gap-6 mb-8 grid-cols-2 sm:grid-cols-3 md::grid-cols-4 lg:grid-cols-5 xl:grid-cols-6">
                {% for product in products %}
                <!-- Карточка товара -->
                <div>
                    <div class="flex square md:w-auto relative bg-gray-50 rounded-lg">
                        <div class="p-2 items-center">
                            <img
                                    alt="{{ product.name }}"
                                    class="rounded object-contain"
                                    loading="lazy"
                                    src="
                                        {% if product.image %}{{ product.image.url }}
                                        {% else %}{% static "img/no_image.png" %}
                                        {% endif %}"
                            >
                        </div>
                    </div>
                    <div class="h-12 p-2 text-xs font-light sm:text-sm md:text-md leading-tight">
                        {{ product.name }}
                    </div>
                    <form class="flex items-center mx-2" action="{% url "cart:cart_add" product.id %}" method="post">
                        {{ cart_product_form }}
                        {% csrf_token %}
                        <div class="flex flex-grow justify-left">
                            <div class="flex rounded-full p-1 border items-center">
                                <button class="h-5 w-5" type="button" onclick="this.nextElementSibling.stepDown(); this.nextElementSibling.onchange();">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 12H6"></path>
                                    </svg>
                                </button>
                                <input class="text-sm w-12 h-6 border-0 text-center appearance-none bg-white" name="quantity" type="number" min="25" value="25" step="25" readonly>
                                <button class="h-5 w-5" type="button" onclick="this.previousElementSibling.stepUp(); this.previousElementSibling.onchange();">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="flex flex-none">
                            <button class="p-2 rounded-full border" type="submit">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                            </button>
                        </div>
                    </form>
                </div>
                <!-- Конец карточки -->
        {% endfor %}
            </div>
        </section>










{#        <section class="container px-6 py-4 mx-auto">#}
{#            <div class="grid gap-4 mb-8 md:grid-cols-2 lg:grid-cols-4">#}
{#                {% for product in products %}#}
{#                    <!-- Карточка товара -->#}
{#                    <div class="flex h-28 w-full md:w-auto relative bg-white border border-gray-100 rounded shadow-md dark:bg-gray-800">#}
{#                        <div class="mx-2 my-auto rounded-full flex-none items-center">#}
{#                            <img#}
{#                                    alt="{{ product.name }}"#}
{#                                    class="h-16 object-contain"#}
{#                                    loading="lazy"#}
{#                                    src="#}
{#                                        {% if product.image %}{{ product.image.url }}#}
{#                                        {% else %}{% static "img/no_image.png" %}#}
{#                                        {% endif %}">#}
{#                        </div>#}
{#                        <div class="flex-grow mr-4 place-content-between">#}
{#                            <p class="m-1 mt-2 font-extralight text-lg md:text-md leading-tight text-gray-900">{{ product.name }}</p>#}
{#                            <p class="ml-1 text-sm text-gray-600">{{ product.category }}</p>#}
{#                            <form class="flex absolute bottom-3 right-1 items-center"#}
{#                                  action="{% url "cart:cart_add" product.id %}" method="post">#}
{#                                <div class="flex justify-center p-4 h-6 rounded-full shadow border border-gray-50 items-center align-items-center">#}
{#                                    <button class="h-4 w-4" type="button"#}
{#                                            onclick="this.nextElementSibling.stepDown(); this.nextElementSibling.onchange();">#}
{#                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none"#}
{#                                             viewBox="0 0 24 24" stroke="currentColor">#}
{#                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"#}
{#                                                  d="M18 12H6"></path>#}
{#                                        </svg>#}
{#                                    </button>#}
{#                                    <input class="text-sm w-16 h-6 border-0 text-center text-sm appearance-none bg-white"#}
{#                                           name="quantity" type="number" min="25" value="25" step="25" readonly>#}
{#                                    <button class="h-4 w-4" type="button"#}
{#                                            onclick="this.previousElementSibling.stepUp(); this.previousElementSibling.onchange();">#}
{#                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none"#}
{#                                             viewBox="0 0 24 24" stroke="currentColor">#}
{#                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"#}
{#                                                  d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>#}
{#                                        </svg>#}
{#                                    </button>#}
{#                                </div>#}
{#                                {{ cart_product_form }}#}
{#                                {% csrf_token %}#}
{#                                <button class="flex p-2 mx-2 shadow rounded-full border font-normal justify-center align-items-center"#}
{#                                        type="submit">#}
{#                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"#}
{#                                         viewBox="0 0 24 24" stroke="currentColor">#}
{#                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"#}
{#                                              d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"/>#}
{#                                    </svg>#}
{#                                </button>#}
{#                            </form>#}
{#                        </div>#}
{#                    </div>#}
{#                {% endfor %}#}
{#            </div>#}
{#        </section>#}
    </div>
{% endblock %}
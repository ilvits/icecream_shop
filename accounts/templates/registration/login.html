{% extends "shop/base.html" %}
{% load widget_tweaks %}

{% block content %}

    {% if form.errors %}
        <p>Your username and password didn't match. Please try again.</p>
    {% endif %}

    {% if next %}
        {% if user.is_authenticated %}
            <p>Your account doesn't have access to this page. To proceed,
                please login with an account that has access.</p>
        {% else %}
            <p>Please login to see this page.</p>
        {% endif %}

    {% else %}
    {% if user.is_authenticated %}
        You are logged in
        <a href="{% url 'logout' %}">Logout</a>
    {% else %}
        <div class="bg-white p-10 rounded-lg shadow md:w-3/4 mx-auto lg:w-1/2">
            <form method="post" action="{% url 'login' %}">

                {% csrf_token %}
                <div class="mb-5">
                            <label for="{{ field.id_for_label }}" class="block mb-2 font-bold text-gray-600">
                            {{ form.username.label_tag }}
                            </label>

                            {%  render_field form.username|add_class:"border border-gray-300 shadow p-3 w-full rounded mb-" placeholder=field.label %}
                </div>
                    <div class="mb-5">
                            <label for="{{ field.id_for_label }}" class="block mb-2 font-bold text-gray-600">
                                {{ form.password.label_tag }}
                            </label>

                            {%  render_field form.password|add_class:"border border-gray-300 shadow p-3 w-full rounded mb-" placeholder=field.label %}
                    </div>
                <input class="block w-32 bg-yellow-700 text-white font-bold p-4 rounded-lg mb-5" type="submit" value="login">
                <input type="hidden" name="next" value="{{ next }}">
            </form>

            {# Assumes you setup the password_reset view in your URLconf #}
            <p><a href="{% url 'password_reset' %}">Lost password?</a></p>
        </div>


    {% endif %}
    {% endif %}

{% endblock %}